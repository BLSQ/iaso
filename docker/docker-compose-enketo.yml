services:
  redis_main:
    image: redis:5
    command: redis-server
    restart: unless-stopped

  redis_cache:
    image: redis:5
    command: redis-server
    restart: unless-stopped
  
  enketo:
    build:
      context: .
      dockerfile: ./docker/enketo/Dockerfile

    ports:
      - "8005:8005"
    depends_on:
      - redis_main
      - redis_cache
    environment:
      - DISABLED_DEBUG=*
      - PORT=8005
      - ENKETO_VAR=yes
      - ENKETO_API_KEY=AZE78974654azeAZE
      - ENKETO_APP_NAME=Enketo for Iaso dev
      - ENKETO_DEFAULT_THEME=grid
      - ENKETO_LINKED_FORM_AND_DATA_SERVER_API_KEY=AZE78974654azeAZE
      - ENKETO_LINKED_FORM_AND_DATA_SERVER_NAME=Iaso Dev
      - ENKETO_LINKED_FORM_AND_DATA_SERVER_SERVER_URL=
      - ENKETO_LOGO_SOURCE=https://i1.wp.com/bluesquarehub.com/wp-content/uploads/2019/11/Bluesquare-horizontal-white.png?w=200&ssl=1
      - ENKETO_REDIS_CACHE_URL=redis://redis_cache:6379
      - ENKETO_REDIS_MAIN_URL=redis://redis_cache:6379
