{% extends 'base.html' %}
{% load static %}

{% block title %}Accueil - SNGD-FILE ACTIVE{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb">
    <i class="fas fa-home"></i>
    <span>Accueil</span>
</div>
{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h1 class="card-title">
            <i class="fas fa-heart-pulse text-primary"></i>
            Bienvenue sur SNGD-FILE ACTIVE
        </h1>
        <p class="mb-0 text-secondary">Système de gestion de la file active des patients</p>
    </div>
    
    <div class="homepage-grid">
        <div class="homepage-card">
            <a href="{% url 'patient_list' %}">
                <i class="fas fa-users"></i>
                <span>Listing des patients</span>
                <small class="text-secondary">Consulter la liste des patients par établissement et période</small>
            </a>
        </div>
        
        <div class="homepage-card">
            <a href="{% url 'validation' %}">
                <i class="fas fa-check-circle"></i>
                <span>Validation</span>
                <small class="text-secondary">Valider les données saisies et les rapports</small>
            </a>
        </div>
        
        <div class="homepage-card">
            <a href="{% url 'upload' %}">
                <i class="fas fa-upload"></i>
                <span>Charger les données</span>
                <small class="text-secondary">Importer les rapports Excel de la file active</small>
            </a>
        </div>
        
        <div class="homepage-card">
            <a href="{% url 'patient_search' %}">
                <i class="fas fa-search"></i>
                <span>Rechercher un patient</span>
                <small class="text-secondary">Recherche avancée dans la base de données</small>
            </a>
        </div>
        
        <div class="homepage-card">
            <a href="https://api.openhexa.org/superset/dashboard/95b9c0e0-bcff-45d0-bf72-1f6cb155ff65/" target="_blank">
                <i class="fas fa-chart-bar"></i>
                <span>Tableau de bord</span>
                <small class="text-secondary">Visualisations et indicateurs de performance</small>
            </a>
        </div>
        
        <div class="homepage-card">
            <a href="https://api.openhexa.org/superset/dashboard/649eb933-13f1-4dc9-b1ff-dd3beb5fa703/" target="_blank">
                <i class="fas fa-chart-pie"></i>
                <span>Tableau de complétude</span>
                <small class="text-secondary">Suivi de la complétude des rapports</small>
            </a>
        </div>
        
        <div class="homepage-card">
            <a href="https://dashboards-civ.bluesquare.org/" target="_blank">
                <i class="fas fa-table"></i>
                <span>Rapports TCD</span>
                <small class="text-secondary">Générer des rapports avec tableau croisé dynamique</small>
            </a>
        </div>
    </div>
</div>

<!-- Quick Stats Section -->
<div class="card mt-3">
    <div class="card-header">
        <h3 class="card-title">Statistiques rapides</h3>
    </div>
    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
        <div class="text-center">
            <div style="font-size: 2rem; font-weight: bold; color: var(--primary-color);">
                <i class="fas fa-users"></i>
            </div>
            <div class="text-secondary">Patients actifs</div>
            <div class="font-weight-bold">{{ total_patients|default:"--" }}</div>
        </div>
        <div class="text-center">
            <div style="font-size: 2rem; font-weight: bold; color: var(--success-color);">
                <i class="fas fa-file-medical"></i>
            </div>
            <div class="text-secondary">Rapports ce mois</div>
            <div class="font-weight-bold">{{ monthly_reports|default:"--" }}</div>
        </div>
        <div class="text-center">
            <div style="font-size: 2rem; font-weight: bold; color: var(--warning-color);">
                <i class="fas fa-clock"></i>
            </div>
            <div class="text-secondary">En attente</div>
            <div class="font-weight-bold">{{ pending_validations|default:"--" }}</div>
        </div>
        <div class="text-center">
            <div style="font-size: 2rem; font-weight: bold; color: var(--danger-color);">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="text-secondary">Perdus de vue</div>
            <div class="font-weight-bold">{{ lost_patients|default:"--" }}</div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.homepage-card small {
    font-size: 0.8rem;
    margin-top: 0.5rem;
    display: block;
}

.grid {
    display: grid;
}

.font-weight-bold {
    font-weight: 600;
    font-size: 1.5rem;
    color: var(--text-primary);
}

.text-primary { color: var(--primary-color) !important; }
.text-secondary { color: var(--text-secondary) !important; }
</style>
{% endblock %}