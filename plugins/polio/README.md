# Polio Campaign

## Preparedness Spreadsheet

Vaccination Round require some amount of preparation at different regional level before
its start. The status of these preparations is encoded in a shared Google Spreadsheet per campaign/round by the different actors.

This Spreadsheet contains different metrics at the national level, and then for each region and district concerned.

Iaso has different features around these `Preparedness SpreadSheet`:
  * Automatically Import data from the SpreadSheet associated to a campaign.
  * Associate a Spreadsheet to a Campaign in the Iaso user interface. It can be a sheet generated by Iaso or a previously existing one. At the moment only one Spreadsheet per campaign is allowed in Iaso, but normally it should be one per round.
  * Generate a Spreadsheet for a campaign inside Google Drive with a sharable url. This Spreadsheet can then be shared to actors outside of Iaso to fill the prepartion status for the zone they are responsible for. It will use the list of districts in the campaign scope (configured inside Iaso) to automatically add the sheet and columns to be filled.
  * Keep a history of previous version of the spreadsheet (one per day)
  * Manually launch an Import of the data via a button in the interface
  * Provide a summary of the data in the spreadsheets for a campaign (by parsing its content)
    - and expose it in API for PowerBI.
    - and display it in the interface.

Since the format of the spread is prone to change and human mistake, there is a few heuristics in the code to try to deal with them appropriately.


### Setup

The Polio Campaign app has integration with the Google Sheet API used to populate the preparedness data. This integration requires a JSON API Key with the Sheet API Enabled, the details of how to create an API key and enable the Sheet API can be found on the [Google Sheet API documentation](https://developers.google.com/sheets/api).

Then set the json content of the file inside a polio.Config object with the slug google_api_key.
For the generation of template you will also need a Config `preparedness_template_id` with keys `fr` and `en` 
