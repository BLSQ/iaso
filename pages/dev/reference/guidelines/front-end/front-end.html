
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      <link rel="icon" href="../../../../../assets/iaso-favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.1">
    
    
      
        <title>Front-end guidelines - IASO</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#front-end-guidelines" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../../index.html" title="IASO" class="md-header__button md-logo" aria-label="IASO" data-md-component="logo">
      
  <img src="../../../../../assets/iaso.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IASO
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Front-end guidelines
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="front-end.html" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
              
                <li class="md-select__item">
                  <a href="../../../../../fr/pages/dev/reference/guidelines/front-end/front-end.html" hreflang="fr" class="md-select__link">
                    Fran√ßais
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BLSQ/iaso" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
<!-- Navigation -->


<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
    <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
            


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../index.html" title="IASO" class="md-nav__button md-logo" aria-label="IASO" data-md-component="logo">
      
  <img src="../../../../../assets/iaso.png" alt="logo">

    </a>
    IASO
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BLSQ/iaso" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Users
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Users
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../users/reference/iaso_concepts/iaso_concepts.html" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../users/reference/iaso_modules/iaso_modules.html" class="md-nav__link">
        Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../users/reference/iaso_web/user_guide.html" class="md-nav__link">
        Web Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../users/reference/iaso_mobile/iaso_mobile.html" class="md-nav__link">
        Mobile Application
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Developers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Developers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_model_glossary/data_model_glossary.html" class="md-nav__link">
        Data model glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sql_dashboard/SQL_Dashboard_feature.html" class="md-nav__link">
        SQL Dashboard feature
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker.html" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../background_tasks/background_tasks.html" class="md-nav__link">
        Background tasks & worker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../env_variables/env_variables.html" class="md-nav__link">
        Environnement variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1_6" id="__nav_3_1_6_label" tabindex="0">
          Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1_6">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/entity.html" class="md-nav__link">
        API reference: Entity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          How to
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          How to
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to/contribute/contribute.html" class="md-nav__link">
        Contribute
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to/setup_dev_env/setup_dev_env.html" class="md-nav__link">
        Setup a dev environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to/use_iaso_apis/use_iaso_apis.html" class="md-nav__link">
        Use iaso apis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          More about IASO
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          More about IASO
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.openiaso.com/" class="md-nav__link">
        IASO website
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.digitalpublicgoods.net/r/iaso" class="md-nav__link">
        Digital Public Goods Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/BLSQ/iaso/releases" class="md-nav__link">
        Release notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.bluesquarehub.com/" class="md-nav__link">
        Bluesquare website
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
            <!-- pdf download  -->
            <div id="pdf-download-container">
                <button id="pdf-download" type="button">
                    <span id="button-text">Download current page</span>
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                        fill="#192041">
                        <path
                            d="M360-460h40v-80h40q17 0 28.5-11.5T480-580v-40q0-17-11.5-28.5T440-660h-80v200Zm40-120v-40h40v40h-40Zm120 120h80q17 0 28.5-11.5T640-500v-120q0-17-11.5-28.5T600-660h-80v200Zm40-40v-120h40v120h-40Zm120 40h40v-80h40v-40h-40v-40h40v-40h-80v200ZM320-240q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320Zm0-80h480v-480H320v480ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm160-720v480-480Z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Table of contents -->


<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
    <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
            

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    Prerequisite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#legacy" class="md-nav__link">
    Legacy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bluesquare-components" class="md-nav__link">
    Bluesquare-components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    Architecture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#styling-components" class="md-nav__link">
    Styling components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maps" class="md-nav__link">
    Maps
  </a>
  
    <nav class="md-nav" aria-label="Maps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-react-leaflet" class="md-nav__link">
    From react-leaflet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-components" class="md-nav__link">
    Custom components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tables" class="md-nav__link">
    Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filters" class="md-nav__link">
    Filters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-style" class="md-nav__link">
    Code style
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remarks" class="md-nav__link">
    Remarks
  </a>
  
</li>
      
    </ul>
  
</nav>
        </div>
    </div>
</div>



          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/BLSQ/iaso/edit/main/docs/pages/dev/reference/guidelines/front-end/front-end.en.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="front-end-guidelines">Front-end guidelines<a class="headerlink" href="#front-end-guidelines" title="Permanent link">#</a></h1>
<h2 id="prerequisite">Prerequisite<a class="headerlink" href="#prerequisite" title="Permanent link">#</a></h2>
<p>First of all make sure your eslint, prettier, typescript environnement is set properly.</p>
<p>On VSC code you can format code following IAOS rules while saving in the settings:</p>
<pre><code>"[javascript]": {
    "editor.formatOnSave": true,
},
"[typescript]": {
    "editor.formatOnSave": true,
},
</code></pre>
<p>Make sure you installed eslint extension too.<br />
On each file you can have only one component.<br />
Use constants, and config files to store static data.<br />
Don't be afraid to split your code into smaller parts, using understandable naming convention. It will help to understand what you are doing in your code.  </p>
<h2 id="legacy">Legacy<a class="headerlink" href="#legacy" title="Permanent link">#</a></h2>
<p>Class component, proptypes are still old way to create features in IASO.<br />
Please use <code>hooks</code>, <code>typescript</code> and <code>arrow component</code>.<br />
We already have a lot of typing done in each domain of the application (forms, submissions, org units, ... )</p>
<h2 id="bluesquare-components">Bluesquare-components<a class="headerlink" href="#bluesquare-components" title="Permanent link">#</a></h2>
<p>Lots of components used in IASO has been moved to a separate <a href="https://github.com/BLSQ/bluesquare-components">repo</a>.<br />
We tried to be the most generic has possible in this repo, people from outside IASO should be able to use it in their own project.<br />
To use it locally, checkout the repo on the same level has ISO and run:  <code>LIVE_COMPONENTS=true pm run dev</code> in IASO folder.<br />
This will use directly the code from your local repo.<br />
To make it available too everybody you have to build new files with <code>npm run clean &amp;&amp; npm run build</code> in bluesquare-component folder. </p>
<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">#</a></h2>
<p>Main index file is located here: <code>hat/assets/js/apps/Iaso/index</code><br />
This is the entrypoint of the app, setting up providers, theme, react-query query client, custom plugins,...  </p>
<p><strong><code>components</code></strong><br />
Used to store generic components that can be used everywhere, like <code>inputComponent</code>, <code>buttons</code>, ...</p>
<p><strong><code>domains</code></strong><br />
For every big feature entity in IASO (forms, org units, plannings, ...) we have a domain folder allowing to display related pages.<br />
- <code>index</code> is generally used to display a list of items 
- <code>details</code> the details of an item
- <code>config</code> used to store constants for the domain (columns, default order, ...)
- <code>hooks</code>: dedicated hooks to make requests or compute specitic data for the domain
- <code>components</code>: mostly intermediate components using smaller ones to construct domain page
- <code>messages</code>: translations messages used for this specific domain
config: used to store constants like defaultOrder, columns, 'baseUrls' 
- <code>types</code>: All types related to the domain</p>
<h2 id="styling-components">Styling components<a class="headerlink" href="#styling-components" title="Permanent link">#</a></h2>
<p>In our effort to maintain readability and conciseness in our code, we are transitioning away from the <code>makeStyles</code> hook and adopting a new approach for styling our components. We will now use a separate object, <code>styles</code>, to define our styles outside of the component function. This object will then be referenced within the <code>sx</code> prop in our JSX.</p>
<p>Here's how to apply this approach:</p>
<ol>
<li>Define your styles in a <code>styles</code> object using the <code>SxStyles</code> type from <code>hat/assets/js/apps/Iaso/types/general.ts</code>. This helps with readability and keeps the component code clean.</li>
<li>Apply styles to your components using the <code>sx</code> prop by referencing the <code>styles</code> object properties.</li>
</ol>
<p>Example:</p>
<pre><code>const styles: SxStyles = {
    root: {
        cursor: 'pointer',
    },
    tooltip: {
        color: 'text.primary',
        bgcolor: 'background.paper',
        boxShadow: (theme: Theme) =&gt; theme.shadows[1],
        '&amp; .MuiTooltip-arrow': {
            color: 'background.paper',
        },
    },
    noResult: {
        textDecoration: 'underline dotted',
    },
};

...
 &lt;Box sx={styles.root}&gt;
 ...
</code></pre>
<h2 id="maps">Maps<a class="headerlink" href="#maps" title="Permanent link">#</a></h2>
<p>We are using <a href="https://leafletjs.com/reference.html">leaflet</a> latest version and <a href="https://react-leaflet.js.org/docs/v3/start-introduction/">react-leaflet</a> (LTS version 3).
To use latest version of react-leaflet we need to upgrade to react 18.</p>
<p>Styles are located in <code>bluesquare-components</code>, you have to import it on each map:</p>
<pre><code>const styles = (theme) =&gt; ({
    mapContainer: {
        ...commonStyles(theme).mapContainer,
    },
});
</code></pre>
<h3 id="from-react-leaflet">From react-leaflet<a class="headerlink" href="#from-react-leaflet" title="Permanent link">#</a></h3>
<p><strong>MapContainer</strong></p>
<p>The main container of the Map.
Props we use:
- <code>bounds</code>: not required, bounds of markers and shapes displayed, used by fit to bound, doc <a href="https://leafletjs.com/reference.html#latlngbounds">here</a>.
- <code>boundsOptions</code>: not required, options related to bounds, doc <a href="https://leafletjs.com/reference.html#fitbounds-options">here</a>.
- <code>zoomControl</code>: required and set to <code>false</code>, in order to use the <code>CustomZoomControl</code>.
- <code>whenCreated</code>: not required,to use a ref of the map in the same component as the MapContainer, you get it by doing
    whenCreated={mapInstance =&gt; {
        map.current = mapInstance;
    }}</p>
<p>default props:</p>
<pre><code>doubleClickZoom={false}
scrollWheelZoom={false}
maxZoom={currentTile.maxZoom}
style={{ height: '100%' }}
center={[0, 0]}
zoomControl={false}
keyboard={false}
bounds={bounds}
boundsOptions={boundsOptions}
</code></pre>
<p><strong>Scalecontrol</strong></p>
<p>Used to display a scale on the bottom left of the map.</p>
<p>Props we use:
- <code>imperial</code>: always set to <code>false</code></p>
<p>We use other component from react-leaflet not listed here as they are optionnal and used like describe in their <a href="https://react-leaflet.js.org/docs/v3/api-components/">docs</a>.</p>
<h3 id="custom-components">Custom components<a class="headerlink" href="#custom-components" title="Permanent link">#</a></h3>
<p><strong>CustomZoomControl</strong>  </p>
<p>This will display an extended zoom control on the top left of the map.
You can zoom in and out, select an area to zoom in and fit the map to the bounds of the map.  </p>
<p>Props:
- <code>bounds</code>: not required, computed bounds displayed on the map, doc <a href="https://leafletjs.com/reference.html#latlngbounds">here</a>.
- <code>boundsOptions</code>: not required, options related to bounds, doc <a href="https://leafletjs.com/reference.html#fitbounds-options">here</a>.
- <code>bound</code>: not required, a boolean to fit to bounds on load, not working if bounds stays undefined.</p>
<p><strong>CustomTileLayer + TilesSwitchDialog</strong>  </p>
<p>Control to display a dialog allowing to change the tile layer of the map, on the top right of the map
Those twot components are going together, maybe we should refactor it to a single component.</p>
<p>CustomTileLayer Props:
- <code>currentTile</code>: required, active tile of the map, usually setted in the map itself with a <code>useState</code>.</p>
<p>TilesSwitchDialog Props:
- <code>currentTile</code>: required, active tile of the map, usually setted in the map itself with a <code>useState</code>.
- <code>setCurrentTile</code>: required, method to update current tile on the map.</p>
<p><strong>MapToggleTooltips</strong></p>
<p>A switch to show or hide tooltips on the map.</p>
<p>Props:</p>
<ul>
<li><code>showTooltip</code>: required, usually setted in the map itself with a <code>useState</code>.</li>
<li><code>setShowTooltip</code>: required, method to showTooltip or not.</li>
</ul>
<p><strong>MapToggleFullscreen</strong>  </p>
<p>A switch to set the map fullscreen or not.</p>
<p>Props:</p>
<ul>
<li><code>isMapFullScreen</code>: required, usually setted in the map itself with a <code>useState</code>.</li>
<li><code>setIsMapFullScreen</code>: required, method to set into fullscreen or not.</li>
</ul>
<p><strong>MapToggleCluster</strong></p>
<p>A switch to allow clustering or not of marker on the map.
You should use <code>MarkerClusterGroup</code> from <code>react-leaflet-markercluster</code> </p>
<p>Props:</p>
<ul>
<li><code>isClusterActive</code>: required, usually setted in the map itself with a <code>useState</code>.</li>
<li><code>setIsClusterActive</code>: required, method to enable custering of markers or not.</li>
</ul>
<p><strong>MarkerComponent / CircleMarkerComponent</strong><br />
Components used to display a marker on the map.
Props:
- see js file for not required props, mainly the same props as <code>Marker</code> from react-leaflet.
- <code>PopupComponent</code>: not required, Popup used while clicking on the marker
- <code>TooltipComponent</code>: not required, Tooltip used while hovering the marker
- <code>item</code>: required, an object with <code>latitude</code> an <code>longitude</code> arguments, those are numbers</p>
<p><strong>MarkersListComponent</strong><br />
Used to display a list of markers</p>
<p>Props:
- <code>markerProps</code>: not required, props spreaded to the marker
- <code>items</code>: required, array of items use by previous component
- <code>PopupComponent</code>: not required, Popup used while clicking on the marker
- <code>TooltipComponent</code>: not required, Tooltip used while hovering the marker
- <code>onMarkerClick</code>: not required, method applied while clicking on the marker on the map
- <code>isCircle</code>: not required, display marker as a circle or not
- <code>onContextmenu</code>: not required, method applied while right clicking on the marker on the map</p>
<h3 id="tables">Tables<a class="headerlink" href="#tables" title="Permanent link">#</a></h3>
<p>Most tables we use need to support filters and deep linking. We have a <code>TableWithDeepLinking</code> component for that purpose, which is a wrapper on the <code>Table</code> from Bluesuare-components.</p>
<p>The typical props to pass are:
- <code>data</code>: the table data. Usually originate s from a <code>react-query</code> hook
- <code>page</code>: the current page. Usually returned by the API
- <code>pageSize</code>: the amount of rows to display on each page. Also comes from the API
- <code>count</code>: the total amount of items in the page. From the API
- <code>pages: total number of pages. From the API
-</code>baseUrl<code>: the baseUrl the table will redirect to 
-</code>params<code>: the params of the current location.</code>TableWithDeepLink<code>will combine them with</code>baseUrl<code>to redirect to the correct location
-</code>extraProps<code>: an object. The</code>loading<code>key will be used to manage the table's loading state. Other values will force a table re-render when they change (similar to</code>useEffect<code>deps array), which can be useful in some situations
-</code>columns<code>: an array of objects of type</code>Column` (imported from bluesquare-components). It's usually defined in a custom hook in order to easily handle translations.</p>
<p><strong>Note: <code>useDeleteTableRow</code></strong> 
When performing <code>DELETE</code> operations from the table that will reduce the amount of table rows, we can run into a pagination bug. To avoid it, use <code>useDeleteTableRow</code> in the <code>useDelete&lt;whatever&gt;</code> hook that will return the delete function:</p>
<pre><code class="language-javascript">export const useDeleteWhatever = (
    params: Record&lt;string, any&gt;,
    count: number,
): UseMutationResult =&gt; {
    const onSuccess = useDeleteTableRow({
        params,
        pageKey: 'whateverPage', // optional, will default to &quot;page&quot;
        pageSizeKey: 'whateverPageSize', //optional, will default to &quot;pageSize&quot;
        count,
        invalidateQueries: ['whatever'], // optional
        baseUrl: baseUrls.whatever,
    });
    return useSnackMutation({
        mutationFn: deleteWhatever,
        options: { onSuccess },
    });
};
</code></pre>
<h3 id="filters">Filters<a class="headerlink" href="#filters" title="Permanent link">#</a></h3>
<p>Most tables we display come with one or several filters, most commonly a text search and date filters.</p>
<p>It's a global feature in Iaso that all filter searches performed on pages are deep-linked, i.e.: the parameters of the filters are saved in the url, so users can share the results of their search/filtering. This has an impact on the architecture of Iaso:</p>
<ul>
<li>
<p>All search fields need to be declared in <code>routes.js</code>, under the <code>params</code> key. Important: <code>params</code> is an ordered list. Passing them in the wrong order in the URL will result in a 404.</p>
</li>
<li>
<p>Applying a filter doesn't change the component state per se but results in a redirection. Depending on the use cases, we may or may not want to save consecutive filters/searches in the routers history</p>
</li>
</ul>
<p>We have a few ready-made components for filters:</p>
<ul>
<li><code>InputComponent</code>: handles most types of inputs: text, select, checkbox, radio</li>
<li><code>OrgUnitTreeviewModal</code>: handles searches on org units</li>
<li><code>DatePicker</code> and <code>DateRange</code>: handle dates</li>
</ul>
<p><code>InputComponent</code> takes a <code>keyValue</code> prop, which is a string that corresponds to the url parameter that stores the filter value, and an <code>onChange</code> prop which is a function with the signature (keyValue,value) =&gt; void. <code>DateRange</code> takes a <code>keyDateFrom</code> and a <code>keyDateTo</code> that play the same role for the start and end date respectively. </p>
<p>We also have a <code>useFilterState</code> hook that handles the state and update methods for filters of a given page:</p>
<pre><code class="language-typescript"> const { filters, handleSearch, handleChange, filtersUpdated } =
        useFilterState({
            baseUrl,
            params,
            withPagination: false,
            saveSearchInHistory: false,
        });
</code></pre>
<ul>
<li><code>baseUrl</code>: is the url of the page</li>
<li><code>params</code>: the parameters passed to the url. <code>useFilterState</code>  will generate the state for the filters based on those. </li>
<li>withPagination: if <code>false</code>  the hook will remove parameters related to table pagination (<code>page</code>, <code>pageSize</code> and so on)</li>
<li><code>saveSearchInHistory</code>: if <code>true</code>, the redirection will use <code>redirect</code>  i.o <code>redirectToReplace</code> and the searchg will be saved in the router's history, meaning that using the back arrow will bring the user to the previous search and not the previous page. </li>
</ul>
<h2 id="code-style">Code style<a class="headerlink" href="#code-style" title="Permanent link">#</a></h2>
<ul>
<li>Prefer <code>type?:string</code> to <code>type: string | undefined</code></li>
<li>Prefer <code>const</code> to <code>let</code>:</li>
</ul>
<p>```javascript
 // BAD
let myVar = "placeholder" 
if(otherVAlue) {
    myVar = otherValue
}</p>
<p>// GOOD
const myVar = otherValue ?? "placeholder </p>
<p>```</p>
<ul>
<li>Function names should include a verb:</li>
</ul>
<pre><code class="language-javascript">// BAD
const username = user =&gt; user.firstname + user.lastname

// GOOD
const makeUsername = user =&gt; user.firstname + user.lastname
</code></pre>
<ul>
<li>Not all functions are hooks. Hooks should either have some sort of internal state or trigger a side-effect:</li>
</ul>
<pre><code class="language-typescript">// BAD, we're just returning a value
const useMyValue = (value :string) =&gt; {
    return parseInt(value,10)
}

// GOOD, because of useSafeIntl, the return value will change with user locale
const useMyValue = (value :IntlMessage) =&gt; {
    const { formatMessage } = useSafeIntl()
    return formatMessage(value)
}

//GOOD, the returned object is memoized
const useMyValue = (value: string) =&gt; {
    return useMemo(() =&gt; {
        const result = {
            isNumber:false, 
            value
            }
        if (parseFloat(value)){
            result.isNumber = true
        }
        return result
    },[value])
}

// GOOD, as side effect will be triggered after the first render
export const useSkipEffectOnMount = (func:Function, deps:Array&lt;unknown&gt;) =&gt; {
    const didMount = useRef(false);

    useEffect(() =&gt; {
        if (didMount.current) {
            func();
        } else {
            didMount.current = true;
        }
    }, deps);
};

</code></pre>
<h2 id="remarks">Remarks<a class="headerlink" href="#remarks" title="Permanent link">#</a></h2>
<ul>
<li>order translations by alphanumeric</li>
<li>spacing is by default theme.spacing(2)</li>
<li>do not use Grid everywhere or too much</li>
<li>all the calls to the api without query params should end by '/'</li>
<li>in routes.js, the <code>params</code> listed are ordered, meaning you can get a 404 when they are not in the right order. Related to this, the <code>paginationPathParams</code> that we spread in most routes should come first, right after the <code>accountId</code> to avoid getting 404 because of automatic redirections</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["content.action.edit"], "search": "../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.b78d2936.min.js"></script>
      
        <script src="../../../../../extrajs/html2pdf.bundle.min.js"></script>
      
        <script src="../../../../../extrajs/pdfDownload.js"></script>
      
        <script src="https://plausible.io/js/script.js"></script>
      
    
  </body>
</html>